{% extends 'admins/adminbase.html' %}
{% block contents %}

<style>
    /* Custom styles for the User Table to match the Dark Admin Theme */
    .user-table-wrapper {
        background-color: var(--surface-color);
        border-radius: 12px;
        padding: 20px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
        border: 1px solid var(--border-color);
    }

    .table-title {
        color: var(--primary-color);
        font-weight: 700;
        font-size: 1.8rem;
        margin-bottom: 20px;
        text-align: center;
        padding-bottom: 10px;
        border-bottom: 2px solid var(--border-color);
    }

    /* Base Table Styling */
    .styled-table {
        width: 100%;
        border-collapse: separate; /* Use separate for rounded corners */
        border-spacing: 0;
        margin-top: 15px;
    }

    /* Table Header (THEAD) */
    .styled-table th {
        background-color: var(--primary-color); /* Vibrant Teal Header */
        color: var(--background-color); /* Deep Navy text on Teal for high contrast */
        padding: 15px 10px;
        text-align: left;
        font-weight: 700;
        font-size: 0.95rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        border: none;
    }
    
    /* Rounded corners for the header */
    .styled-table thead tr:first-child th:first-child { border-top-left-radius: 10px; }
    .styled-table thead tr:first-child th:last-child { border-top-right-radius: 10px; }


    /* Table Body (TBODY) */
    .styled-table td {
        background-color: var(--surface-color); /* Matches the wrapper */
        color: var(--text-color);
        padding: 12px 10px;
        border-bottom: 1px solid var(--border-color);
        transition: background-color 0.3s;
        font-size: 0.9rem;
    }

    /* Hover effect */
    .styled-table tbody tr:hover td {
        background-color: #2c3a4d; /* Slightly lighter shade for hover */
    }

    /* Status Tag Styling */
    .status-badge {
        display: inline-block;
        padding: 4px 10px;
        border-radius: 50px;
        font-size: 0.8rem;
        font-weight: 600;
        text-transform: capitalize;
    }

    .status-waiting {
        background-color: #ffc107; /* Yellow/Warning */
        color: #333;
    }

    .status-activated {
        background-color: #28a745; /* Green/Success */
        color: white;
    }
    
    /* Action Links Styling */
    .action-link {
        font-weight: 600;
        transition: color 0.3s;
    }
    
    .activate-link {
        color: var(--primary-color); /* Teal for activation */
    }
    .activate-link:hover {
        color: #00e0ff;
    }

    .delete-link {
        color: #dc3545; /* Red for delete */
        margin-left: 10px;
    }
    .delete-link:hover {
        color: #ff6347;
    }
    
</style>

<div class="user-table-wrapper">
    <h2 class="table-title">
        <i class="fas fa-users-cog me-2"></i> Registered User Management
    </h2>

    <div class="table-responsive">
        <table class="styled-table">
            <thead>
                <tr>
                    <th>S.No</th>
                    <th>Name</th>
                    <th>Login ID</th>
                    <th>Mobile</th>
                    <th>Email</th>
                    <th>Locality</th>
                    <th>Status</th>
                    <th class="text-center">Action</th>
                </tr>
            </thead>
            <tbody>
                {% for i in data %}
                <tr>
                    <td>{{forloop.counter}}</td>
                    <td>{{i.name}}</td>
                    <td>{{i.loginid}}</td>
                    <td>{{i.mobile}}</td>
                    <td>{{i.email}}</td>
                    <td>{{i.locality}}</td>
                    
                    <td>
                        {% if i.status == 'waiting' %}
                            <span class="status-badge status-waiting">Waiting</span>
                        {% else %}
                            <span class="status-badge status-activated">Activated</span>
                        {% endif %}
                    </td>

                    <td class="text-center">
                        {% if i.status == 'waiting' %}
                            <a class="action-link activate-link" href="{% url 'activate_users' %}?uid={{ i.id }}">
                                <i class="fas fa-check-circle me-1"></i> Activate
                            </a>
                        {% else %}
                            <a class="action-link delete-link" href="{% url 'delete_users' %}?uid={{ i.id }}">
                                <i class="fas fa-trash-alt me-1"></i> Delete
                            </a>
                        {% endif %}
                    </td>
                    
                </tr>
                {% empty %}
                <tr>
                    <td colspan="8" class="text-center p-4">
                        <i class="fas fa-exclamation-circle me-2"></i> No users currently registered in the system.
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

{% endblock %}